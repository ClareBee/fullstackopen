(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(40)},21:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=(t(21),t(14)),l=t(2),i=t(3),s=t.n(i),m="/api/persons",f=function(){return s.a.get(m).then(function(e){return e.data})},d=function(e){return s.a.post(m,e).then(function(e){return e.data})},p=function(e,n){return s.a.put("".concat(m,"/").concat(e),n).then(function(e){return e.data})},h=function(e){return s.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},b=(t(39),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Filter shown with:"),r.a.createElement("input",{className:"form-input",onChange:e.showNames,value:e.searchInput}))}),v=function(e){return r.a.createElement("form",{onSubmit:e.addPerson},r.a.createElement("div",{className:"form-input"},"Name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",{className:"form-input"},"Number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"ADD")))},E=function(e){var n=e.people,t=e.deletePerson;return n.map(function(e,n){return r.a.createElement("div",{className:"person",key:e.name+e.index},r.a.createElement("div",null,r.a.createElement("strong",null,e.name," | ",e.number)),r.a.createElement("button",{onClick:function(n){return t(n,e.id)},className:"delete"},"Delete"))})},w=function(e){var n=e.message;if(null===n)return null;var t="notification ".concat(n.type);return r.a.createElement("div",{className:t},n.content)},g=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),s=i[0],m=i[1],g=Object(a.useState)(""),N=Object(l.a)(g,2),j=N[0],y=N[1],C=Object(a.useState)(""),O=Object(l.a)(C,2),k=O[0],P=O[1],S=Object(a.useState)(null),D=Object(l.a)(S,2),U=D[0],A=D[1];Object(a.useEffect)(function(){f().then(function(e){console.log(e),c(e)})},[]);var I=function(e,n){A({type:e,content:n}),setTimeout(function(){A(null)},5e3)},x=function(){m(""),y("")};return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(b,{showNames:function(e){P(e.target.value)},searchInput:k}),r.a.createElement("h2",null,"Add a New "),r.a.createElement(w,{message:U}),r.a.createElement(v,{newName:s,newNumber:j,handleNameChange:function(e){m(e.target.value)},handleNumberChange:function(e){y(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:s,number:j};if(!s||!j)return I("error","Please enter all requested info"),null;var a=t.find(function(e){return e.name.toUpperCase()===s.toUpperCase()});if(!a)return d(n).then(function(e){console.log(e),c(t.concat(e)),I("success","".concat(n.name," was added successfully!")),x()}).catch(function(e){var n=e.response.data;console.log(n),I("error","".concat(e,": ").concat(n.error))}),null;var r=a.id;if(!window.confirm("".concat(a.name," is already added to phonebook. Replace the old number with the new one?")))return null;p(r,n).then(function(e){console.log(e),c(t.map(function(n){return n.id!==r?n:e})),I("success","".concat(s," successfully updated")),x()}).catch(function(e){I("error","".concat(s," was already deleted!")),x()})}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement("div",null,r.a.createElement(E,{people:""===k?t:t.filter(function(e){return e.name?e.name.toUpperCase().match(k.toUpperCase()):null}),deletePerson:function(e,n){var a=Object(u.a)(t),r=a.find(function(e){return e.id===n}),o=a.filter(function(e){return e!==r});if(e.preventDefault(),!window.confirm("Are you sure you want to delete ".concat(r.name)))return null;console.log("id",n),console.log("person",r),h(n).then(function(e){console.log("response",e),c(o)}).catch(function(e){I("error","".concat(r.name," was already removed!"))})}})))};o.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.26301374.chunk.js.map